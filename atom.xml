<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Drayft</title>
  
  <subtitle>每天前进一小步</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wangrui-hz.github.io/"/>
  <updated>2020-07-23T06:27:14.749Z</updated>
  <id>http://wangrui-hz.github.io/</id>
  
  <author>
    <name>Draytf</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>PHP+Apache+MySQL环境配置</title>
    <link href="http://wangrui-hz.github.io/2020/07/21/php-apache-mysql-huan-jing-pei-zhi/"/>
    <id>http://wangrui-hz.github.io/2020/07/21/php-apache-mysql-huan-jing-pei-zhi/</id>
    <published>2020-07-21T14:43:59.000Z</published>
    <updated>2020-07-23T06:27:14.749Z</updated>
    
    <content type="html"><![CDATA[<h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p>&emsp;&emsp;网上的PHP下载地址很多，但是很多下载文件中不包含<code>php5apache2_4.dll</code>配置文件，这会导致无法配置Apache。<br>&emsp;&emsp;下文给出的下载链接是本人找到的比较官方的地址，更新时间：2020年07月15日。<strong>Note</strong>：下载时间可能较慢。<br>&emsp;&emsp;经过测试，这套环境能在Win10下成功运行。</p><ul><li><p>PHP：5.4.45，VC9，X64  【<a href="https://phpdev.toolsforresearch.com/php-5.4.45-Win32-VC9-x64.zip" target="_blank" rel="noopener">下载</a>[^ 1]】</p><blockquote><p>[1] <a href="https://phpdev.toolsforresearch.com/php-5.4.45-Win32-VC9-x64.zip" target="_blank" rel="noopener">https://phpdev.toolsforresearch.com/php-5.4.45-Win32-VC9-x64.zip</a> </p></blockquote></li><li><p>Apache：2.4.43，VC14，X64  【<a href="https://www.apachelounge.com/download/VS16/binaries/httpd-2.4.43-win64-VS16.zip" target="_blank" rel="noopener">下载</a>[^ 2]】</p><blockquote><p>[2] <a href="https://www.apachelounge.com/download/VS16/binaries/httpd-2.4.43-win64-VS16.zip" target="_blank" rel="noopener">https://www.apachelounge.com/download/VS16/binaries/httpd-2.4.43-win64-VS16.zip</a></p></blockquote></li><li><p>Mysql：5.7.31，X64  【<a href="https://cdn.mysql.com//Downloads/MySQLInstaller/mysql-installer-community-5.7.31.0.msi" target="_blank" rel="noopener">下载</a>[^ 3]】</p><blockquote><p>[3] <a href="https://www.apachelounge.com/download/VS16/binaries/httpd-2.4.43-win64-VS16.zip" target="_blank" rel="noopener">https://www.apachelounge.com/download/VS16/binaries/httpd-2.4.43-win64-VS16.zip</a></p></blockquote></li></ul><hr><h3 id="安装事项"><a href="#安装事项" class="headerlink" title="安装事项"></a>安装事项</h3><ul><li><p><strong>目录结构</strong>：在D:\下新建如下的目录结构，把软件解压、安装到对应的文件夹即可。</p><ul><li><p>server</p><ul><li>apache<ul><li>mysql<ul><li>data</li></ul></li><li>php</li></ul></li></ul></li><li><p><strong>安装过程</strong>：直接搜索对应版本号的软件安装教程，默认安装即可。</p><blockquote><p><strong>Note</strong>：安装MySQL时，软件目录选择mysql，数据目录选择data</p></blockquote></li><li><p>重要目录：</p><ul><li>网站根目录：<code>server\apache\htdocs</code>（编写的网页放在这个目录下）。</li></ul></li></ul></li></ul><hr><h3 id="Apache配置"><a href="#Apache配置" class="headerlink" title="Apache配置"></a>Apache配置</h3><ul><li><p><strong>安装服务</strong></p><ol><li>进入CMD管理员模式；</li><li><code>cd server\apache\bin</code>；&nbsp;&nbsp;&nbsp;&nbsp;//Apache软件安装过程，未把httpd加入Windows系统变量，所以需要进入bin目录</li><li><code>httpd -k install -n “Apache”</code>。&nbsp;&nbsp;&nbsp;&nbsp;//安装与命名</li></ol></li><li><p><strong>配置默认站点</strong></p><ol><li>打开<code>server\apache\conf</code> 下的 <code>httpd.conf</code> 配置文件。&nbsp;&nbsp;&nbsp;&nbsp; //修改之前先备份；</li><li>找到 <code>Define SRVROOT</code>，把<code>/Apache24</code>修改为 <code>D:/server/apache</code>（绝对路径）；</li><li>找到<code>ServerName</code>，把<code>www.example.com:80</code>修改为<code>localhost</code>（网站域名），并取消注释。</li></ol></li><li><p><strong>修改本地hosts文件</strong></p><ol><li>打开 <code>C:\Windows\System32\drivers\etc\host</code>；</li><li>在下方添加 <code>127.0.0.1    localhost</code>（域名解析）。</li></ol></li><li><p><strong>配置PHP服务</strong></p><ol><li><p>打开<code>httpd.conf</code></p></li><li><p>添加语句<code>LoadModule php5-module D:/server/php/php5apache2_4.dll</code>&nbsp;&nbsp;&nbsp;&nbsp;//加载PHP模块</p></li><li><p>添加语句<code>PHPIniDir “D:/server/php”</code>&nbsp;&nbsp;&nbsp;&nbsp;//告诉Apache，PHP配置文件所在路径</p></li><li><p>添加语句<code>AddType application/x-httpd-php .php</code>&nbsp;&nbsp;&nbsp;&nbsp;//Apache把后缀是php的文件交给PHP模块</p><blockquote><p><strong>Note</strong>：进行3操作前，需要先生成一个php.ini配置文件，因为php.ini默认是不存在的，php文件夹只有php.ini-development和php.ini-production。具体步骤请参考PHP配置。</p><p><strong>Note</strong>：语句直接添加在 LoadModule xxx xxx 下方就行。</p></blockquote></li></ol></li><li><p><strong>打开虚拟主机功能</strong>（可选的，学习过程中可以不需要打开）</p><ol><li><p>打开<code>httpd.conf</code></p></li><li><p>取消该语句的注释： <code>Include conf/extra/httpd-vhosts.conf</code></p></li><li><p>打开虚拟主机配置文件 <code>apache\conf\extra\httpd-vhosts.conf</code></p></li><li><p>根据示例，增加虚拟主机</p><pre><code>&lt;VirtualHost *:80&gt;    Document root &#39;E:/discuz&#39;  #增加网站（目录）    ServerName www.discuz.com  #增加域名（主机名）    &lt;Directory &#39;E:/discuz&#39;&gt;  #配置权限        Order Deny,Allow        Deny from all        Allow from all        #列表显示        Options Indexes FollowSymLinks        #指定默认访问文件        DirectoryIndex index.html index.htm index.php    &lt;/Directory&gt;&lt;/VirtualHost&gt;</code></pre></li><li><p>给Windows的host再添加一条记录</p><p><code>127.0.0.1    www.discuz.com</code></p></li></ol><blockquote><p><strong>Note</strong>：如果启用虚拟主机配置，那么默认的主机地址localhost就不再生效，如果想要其生效，则需要单独增加一个域名为localhost的虚拟主机。</p></blockquote></li><li><p>测试是否配置成功</p><p>验证配置文件：在CMD命令行输入<code>httpd -t</code>，如果返回<code>Syntax OK</code>，则说明配置成功。</p></li></ul><hr><h3 id="PHP配置"><a href="#PHP配置" class="headerlink" title="PHP配置"></a>PHP配置</h3><ul><li><strong>生成php.ini</strong><ol><li>进入目录 <code>server\php</code>；</li><li>备份 php.ini-development 文件；</li><li>把原 php.ini-development 修改为 php.ini。</li></ol></li><li><strong>加载MySQL扩展</strong><ol><li>打开php.ini文件；</li><li>找到<code>extension=php_mysql,dll</code>，并取消注释。</li></ol></li><li><strong>添加扩展文件夹的绝对路径</strong><ol><li>打开php.ini；</li><li>在<code>extension_dir = “ext”</code>下添加语句<code>extension_dir = “D:/server/php/ext&quot;</code>。</li></ol></li><li><strong>修改时区</strong><ol><li>打开php.ini；</li><li>找到<code>date.timezone = Europe/Amsterdam</code>，修改为地区为<code>PRC</code>。</li></ol></li></ul><hr><h3 id="MySQL配置"><a href="#MySQL配置" class="headerlink" title="MySQL配置"></a>MySQL配置</h3><ul><li>大部分配置都在安装过程设置好了，包括服务名称，账号密码等。</li></ul><hr><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><ul><li>环境配置完成后，每次打开网站前，均要先启动服务与软件：<ol><li>管理员模式进入Windows下CMD命令行；</li><li>启动MySQL服务：<code>net start mysql</code>；</li><li>连接MySQL软件：<code>mysql -u root -p</code>；</li><li>启动Apache：<code>httpd -k start</code>。</li></ol></li><li>结束编程后，一般建议关闭软件与服务：<ol><li>退出MySQL连接：<code>\q</code>；</li><li>关闭MySQL服务：<code>net stop mysql</code>；</li><li>关闭Apache：<code>httpd -k stop</code>。</li></ol></li></ul><blockquote><p><strong>Note</strong>：如果没有添加以上命令到Windows系统变量，那么在CMD命令行下，都要<code>cd</code>到对应的<code>\bin</code>目录，再执行。</p><p><strong>Note</strong>：有关Apache和PHP的配置文件，如果进行了修改，一定要重新启动Apache才会生效 <code>httpd -k restart</code>。</p></blockquote><hr><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol><li><p>文章参考的视频资料为【<a href="http://yun.itheima.com/course/264.html?bili" target="_blank" rel="noopener">下载</a>[^ 4]】</p><blockquote><p>[4] <a href="http://yun.itheima.com/course/264.html?bili" target="_blank" rel="noopener">http://yun.itheima.com/course/264.html?bili</a></p></blockquote></li><li><p>文章可能出现写作错误，配置出现错误时，请结合其他文章解决。</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;下载地址&quot;&gt;&lt;a href=&quot;#下载地址&quot; class=&quot;headerlink&quot; title=&quot;下载地址&quot;&gt;&lt;/a&gt;下载地址&lt;/h3&gt;&lt;p&gt;&amp;emsp;&amp;emsp;网上的PHP下载地址很多，但是很多下载文件中不包含&lt;code&gt;php5apache2_4.dll&lt;/
      
    
    </summary>
    
    
      <category term="PHP" scheme="http://wangrui-hz.github.io/categories/PHP/"/>
    
      <category term="MySQL" scheme="http://wangrui-hz.github.io/categories/PHP/MySQL/"/>
    
      <category term="Apache" scheme="http://wangrui-hz.github.io/categories/PHP/MySQL/Apache/"/>
    
    
      <category term="环境配置" scheme="http://wangrui-hz.github.io/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>article title</title>
    <link href="http://wangrui-hz.github.io/2020/07/21/article-title/"/>
    <id>http://wangrui-hz.github.io/2020/07/21/article-title/</id>
    <published>2020-07-21T08:07:19.000Z</published>
    <updated>2020-07-21T08:10:22.978Z</updated>
    
    <content type="html"><![CDATA[<p>###引用</p><pre class=" language-markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span>静夜诗<span class="token blockquote punctuation">></span></code></pre><p>###代码</p><pre class=" language-php"><code class="language-php">    <span class="token delimiter">&lt;?php</span>    <span class="token function">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token delimiter">?></span></code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;###引用&lt;/p&gt;
&lt;pre class=&quot; language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;&lt;span class=&quot;token blockquote punctuation&quot;&gt;&gt;&lt;/span&gt;静夜诗
&lt;span cl
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://wangrui-hz.github.io/2020/07/21/hello-world/"/>
    <id>http://wangrui-hz.github.io/2020/07/21/hello-world/</id>
    <published>2020-07-21T07:45:11.257Z</published>
    <updated>2020-07-21T07:45:11.257Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
